hab_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	hab1_mission_1 = {
		icon = mission_alliances
		position = 1
		provinces_to_highlight = {  
			OR = {
				AND = {
					owner = { is_emperor = yes }
					root = { is_emperor = no }
				}
				AND = {
					owner = {
						is_elector = yes
						OR = {
							NOT = { preferred_emperor = ROOT }
							NOT = { has_opinion = { who = ROOT value = 100 } }
						}
					}
					NOT = {
						ROOT = {
							calc_true_if = {
								all_elector = {
									preferred_emperor = ROOT
									has_opinion = { who = ROOT value = 100 }
								}
								amount = 5
							}
						}
					}
				}
			}
		} 

		trigger = { 
			is_emperor = yes
			calc_true_if = {
				desc = secure_the_imperial_crown.tooltip
				all_elector = {
					preferred_emperor = ROOT
					has_opinion = { who = ROOT value = 100 }
				}
				amount = 4
			}
		} 

		effect = {  
			if = {
				limit = {
					exists = BOH
					valid_for_personal_unions_trigger = yes
					BOH = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = BOH
				}
			}
			else = {
				bohemia_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				erzgebirge_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
				moravia_area = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
			}
			add_country_modifier = {
				name = "succesful_bid_for_imperial_crown"
				duration = 5475 #15 years
			}
		}
	}

	hab1_mission_2 = {
		icon = mission_empire
		position = 2
		required_missions = { hab1_mission_1 } 
		provinces_to_highlight = {  
			OR = {
				province_id = 266
				AND = {
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 8
								OR = {
									area = bohemia_area
									area = erzgebirge_area
									area = moravia_area
								}
							}
						}
					}
					OR = {
						area = bohemia_area
						area = erzgebirge_area
						area = moravia_area
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			owns_or_non_sovereign_subject_of = 266
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = bohemia_area
					area = erzgebirge_area
					area = moravia_area
				}
			}
		} 

		effect = {  
			add_country_modifier = {
				name = "habsburg_bohemia"
				duration = 5475 #15 years
			}
			silesia_area = {
				add_permanent_claim = ROOT
			}
			hidden_effect = {
				remove_casus_belli = {
					type = cb_restore_personal_union
					target = BOH
				}
			}
		} 
	}

	hab1_mission_3 = {
		icon = mission_assemble_an_army
		position = 3
		required_missions = { hab1_mission_2 } 
		provinces_to_highlight = {  
			area = silesia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			silesia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		} 

		effect = {  
			silesia_area = {
				add_province_modifier = {
					name = "austrian_silesia"
					duration = 7300
				}
				add_nationalism = -5
			}
			slovakia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			malopolska_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
				
			}
			red_ruthenia_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
			sandomierz_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT	}
				}
				add_permanent_claim = ROOT
			}
		} 
	}

	hab1_mission_4 = {
		icon = mission_noble_council
		position = 4
		required_missions = { hab1_mission_3 } 
		provinces_to_highlight = {  
			OR = {
				area = slovakia_area
				area = malopolska_area
				area = red_ruthenia_area
				area = sandomierz_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			slovakia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			malopolska_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			red_ruthenia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sandomierz_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		} 

		effect = {  
			if = {
				limit = {
					has_dlc = "Emperor"
				}
				add_adm_power = 100
				if = {
					limit = {
						exists = PLC
						valid_for_personal_unions_trigger = yes
						PLC = {
							valid_for_personal_unions_trigger = yes
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = PLC
					}
				}
				else_if = {
					limit = {
						exists = POL
						valid_for_personal_unions_trigger = yes
						POL = {
							valid_for_personal_unions_trigger = yes
						}
					}
					add_casus_belli = {
						type = cb_restore_personal_union
						months = 300
						target = POL
					}
				}
				else = {
					poland_region = {
						limit = {
							NOT = { is_permanent_claim = ROOT }
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			else = {
				add_country_modifier = {
					name = "austrian_empire"
					duration = 7300
				}
			}
		} 
	}

	hab1_mission_5 = {
		icon = polish_diplomacy
		position = 1
		required_missions = { hab1_mission_4 } 
		provinces_to_highlight = {  
			region = poland_region
			ROOT = {
				NOT = {
					poland_region = {
						type = all
						country_or_non_sovereign_subject_holds = root
					}
				}
				NOT = {
					overlord_of = PLC
				}
				NOT = {
					AND = {
						NOT = { exists = PLC }
						overlord_of = POL
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			if = {
				limit = {
					exists = PLC
				}
				OR = {
					PLC = { is_subject_of = root }
					poland_region = {
						type = all
						country_or_non_sovereign_subject_holds = root
					}
				}
			}
			else_if = {
				limit = {
					exists = POL
				}
				OR = {
					POL = { is_subject_of = root }
					poland_region = {
						type = all
						country_or_non_sovereign_subject_holds = root
					}
				}
			}
			else = {
				poland_region = {
					type = all
					country_or_non_sovereign_subject_holds = root
				}
			}
		} 

		effect = {  
			add_country_modifier = {
				name = "austrian_empire"
				duration = 7300
			}
			if = {
				limit = {
					PLC = { is_subject_of = root }
				}
				every_owned_province = {
					limit = {
						is_core = PLC
						NOT = {
							any_neighbor_province = {
								owned_by = PLC
							}
						}
					}
					remove_core = PLC
				}
			}
			if = {
				limit = {
					POL = { is_subject_of = root }
				}
				every_owned_province = {
					limit = {
						is_core = POL
						NOT = {
							any_neighbor_province = {
								owned_by = POL
							}
						}
					}
					remove_core = POL
				}
			}
		} 
	}
}
hab_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	hab2_mission_1 = {
		icon = imperial_ascendancy
		position = 2
		required_missions = { hab1_mission_1 } 
		provinces_to_highlight = {  
			owner = {
				NOT = { tag = root }
				NOT = { is_subject_of = ROOT }
				OR = {
					AND = {
						num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
							value = 10
							continent = europe
						}
						is_part_of_hre = yes
					}
					is_emperor = yes
				}
			}
		} 

		trigger = {  
			is_emperor = yes
			OR = {
				hre_reform_passed = emperor_privilegia_de_non_appelando
				AND = {
					custom_trigger_tooltip = {
						tooltip = emp_hab_no_one_to_threaten_us_trigger_tooltip
						NOT = {
							any_country = {
								NOT = { tag = root }
								NOT = { is_subject_of = ROOT }
								is_part_of_hre = yes
								num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
									value = 10
									continent = europe
								}
							}
						}
					}
					calc_true_if = {
						desc = emp_hab_no_one_to_threaten_us_trigger2_tooltip
						amount = 10
						all_country = {
							has_reform = free_city
						}
					}
				}
			}
		} 

		effect = {  
			add_dip_power = 50
			add_country_modifier = {
				name = hab_ascendancy_in_empire
				duration = 7300
			}
		} 
	}

	hab2_mission_2 = {
		icon = the_imperial_border
		position = 3
		required_missions = { hab2_mission_1 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					owner = { is_emperor = yes }
					root = { is_emperor = no }
				}
				AND = {
					is_part_of_hre = yes
					owner = {
						OR = {
							is_part_of_hre = no
							AND = {
								is_subject = yes
								overlord = { is_part_of_hre = no }
							}
						}
					}
				}
			}
		} 

		trigger = {  
			is_emperor = yes
			custom_trigger_tooltip = {
				tooltip = no_hre_province_owned_by_non_hre_member_or_overlord_trigger
				europe = {
					type = all
					OR = {
						is_part_of_hre = no
						AND = {
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
								OR = {
									is_subject = no
									AND = {
										is_subject = yes
										overlord = { is_part_of_hre = yes }
									}
								}
							}
						}
					}
				}
			}
		} 

		effect = {  
			add_imperial_influence = 15
			if = {
				limit = {
					has_dlc = "The Cossacks"
				}
				add_dip_power = 100
				custom_tooltip = emp_hab_imperial_border_effect_tooltip
				hidden_effect = {
					every_country = {
						limit = {
							is_part_of_hre = yes
							NOT = { is_rival = root }
							NOT = { root = { is_rival = prev } }
						}
						add_trust = {
							who = root
							value = 10
						}
					}
				}
			}
			else = { add_dip_power = 200 }
		} 
	}

	hab2_mission_3 = {
		icon = holy_state
		position = 4
		required_missions = { hab2_mission_2 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					owner = { is_emperor = yes }
					root = { is_emperor = no }
				}
				AND = {
					owner = {
						is_part_of_hre = yes
						NOT = { religion = root }
					}
					hre_religion_locked = no
				}
			}
		} 

		trigger = {  
			is_emperor = yes
			if = {
				limit = {
					has_dlc = "Art of War"
				}
				OR = {
					hre_religion_locked = yes
					AND = {
						custom_trigger_tooltip = {
							tooltip = emp_bav_center_of_counter_reformation_tooltip2
							had_global_flag = {
								flag = reformation_started
								days = 18250
							}
						}
						custom_trigger_tooltip = {
							tooltip = emp_hab_empire_united_in_religion_trigger_tooltip
							NOT = {
								any_country = {
									is_part_of_hre = yes
									NOT = { religion = root }
								}
							}
						}
					}
				}
				is_all_concessions_in_council_taken = yes
			}
			else = {
				OR = {
					AND = {
						custom_trigger_tooltip = {
							tooltip = emp_bav_center_of_counter_reformation_tooltip2
							had_global_flag = {
								flag = reformation_started
								days = 18250
							}
						}
						custom_trigger_tooltip = {
							tooltip = emp_hab_empire_united_in_religion_trigger_tooltip
							NOT = {
								any_country = {
									is_part_of_hre = yes
									NOT = { religion = root }
								}
							}
						}
					}
					is_all_concessions_in_council_taken = yes
				}
			}
		} 

		effect = {  
			if = {
				limit = {
					religion = catholic
				}
				add_country_modifier = {
					name = hab_empire_united_in_religion_mod_catholic
					duration = -1
				}
			}
			else_if = {
				limit = {
					religion = protestant
					has_dlc = "Common Sense"
				}
				add_country_modifier = {
					name = hab_empire_united_in_religion_mod_protestant
					duration = -1
				}
			}
			else_if = {
				limit = {
					religion = reformed
					has_dlc = "Wealth of Nations"
				}
				add_country_modifier = {
					name = hab_empire_united_in_religion_mod_reformed
					duration = -1
				}
			}
			else = {
				add_country_modifier = {
					name = hab_empire_united_in_religion_mod_generic
					duration = -1
				}
			}
			custom_tooltip = emp_hab_empire_united_in_religion_effect_remove_tooltip
		} 
	}

	hab2_mission_4 = {
		icon = a_roman_empire
		position = 5
		required_missions = { hab2_mission_3 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					owner = { is_emperor = yes }
					root = { is_emperor = no }
				}
				AND = {
					province_id = 118
					OR = {
						is_part_of_hre = no
						owner = { is_part_of_hre = no }
					}
				}
			}
		} 

		trigger = {  
			is_emperor = yes
			118 = {
				is_part_of_hre = yes
				owner = {
					is_part_of_hre = yes
				}
			}
		} 

		effect = {  
			add_prestige = 33
			add_country_modifier = {
				name = hab_empire_has_rome
				duration = -1
			}
			custom_tooltip = emp_hab_empire_united_in_religion_effect_remove_tooltip
		} 
	}

	hab2_mission_5 = {
		icon = a.e.i.o.u.
		position = 6
		required_missions = { hab2_mission_4 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					owner = { is_emperor = yes }
					root = { is_emperor = no }
				}
				AND = {
					is_part_of_hre = yes
					owner = {
						OR = {
							is_part_of_hre = no
							AND = {
								is_subject = yes
								overlord = { is_part_of_hre = no }
							}
						}
					}
				}
				owner = {
					is_part_of_hre = yes
					NOT = {
						has_opinion = {
							who = root
							value = 1
						}
					}
				}
			}
		} 

		trigger = {  
			is_emperor = yes
			OR = {
				hre_reform_passed = emperor_landfriede
				hre_reform_passed = emperor_reichskrieg
				hre_reform_passed = emperor_privilegia_de_non_appelando
			}
			custom_trigger_tooltip = {
				tooltip = emp_hab_empire_pass_reforms_trigger_tooltip
				NOT = {
					any_country = {
						is_part_of_hre = yes
						NOT = {
							has_opinion = {
								who = root
								value = 1
							}
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = no_hre_province_owned_by_non_hre_member_or_overlord_trigger
				europe = {
					type = all
					OR = {
						is_part_of_hre = no
						AND = {
							is_part_of_hre = yes
							owner = {
								is_part_of_hre = yes
								OR = {
									is_subject = no
									AND = {
										is_subject = yes
										overlord = { is_part_of_hre = yes }
									}
								}
							}
						}
					}
				}
			}
		} 

		effect = {  
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 25
			}
			add_country_modifier = {
				name = hab_aeiou_mod
				duration = -1
			}
			custom_tooltip = emp_hab_empire_united_in_religion_effect_remove_tooltip
		} 
	}
}
league_warring = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	league_war_1 = {
		icon = the_holy_league
		position = 7
		provinces_to_highlight = {  

		} 

		trigger = {  
			or = {
				hre_leagues_enabled = yes
				is_year = 1575
			}

		} 

		effect = {  
			add_country_modifier = {
				name = hab_counter_refo
				duration = 7300
			}
		} 
	}

	league_war_2 = {
		icon = peace_in_europe
		position = 8
		required_missions = { league_war_1 } 
		provinces_to_highlight = {  

		} 

		trigger = {
			or = {
				and = {
					hre_religion_locked = yes
					is_emperor = yes
				}
				and = {
					hre_religion_locked = no
					imperial_influence = 30
				}
			}  
		} 

		effect = {  
			add_imperial_influence = 10
			custom_tooltip = hab_league_truimph
			tooltip = {
				add_country_modifier = {
					name = hab_proper_truimph
					duration = -1
				}
			}
			tooltip = {
				add_country_modifier = {
					name = hab_truimph
					duration = -1
				}
			}
			hidden_effect = {
				if = {
					limit = { hre_religion_locked = yes}
					add_country_modifier = {
						name = hab_proper_truimph
						duration = -1
					}
				}
				else = {
					add_country_modifier = {
						name = hab_truimph
						duration = -1
					}
				}
			}
		} 
	}

	south_germany_5 = {
		icon = reorganize_the_confederacy
		position = 1
		required_missions = { south_germany_3 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					OR = {
						area = romandie_area
						area = switzerland_area
					}
					NOT = { country_or_non_sovereign_subject_holds = root }
					ROOT = {
						NOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 7 #Switzerland + Three Leagues
								OR = {
									area = romandie_area
									area = switzerland_area
								}
							}
						}
					}
				}
				AND = {
					owned_by = SWI
					SWI = { NOT = { is_subject_of = ROOT } }
				}
			}
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 7 #Switzerland + Three Leagues
				OR = {
					area = romandie_area
					area = switzerland_area
				}
			}
			OR = {
				NOT = { exists = SWI }
				overlord_of = SWI
			}
		} 

		effect = {  
			bourgogne_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			lorraine_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			every_province = {
				limit = {
					region = france_region
					NOT = { area = bourgogne_area }
					NOT = { area = lorraine_area }
					is_part_of_hre = yes
					owner = {
						OR = {
							is_part_of_hre = no
							AND = {
								is_subject = yes
								overlord = { is_part_of_hre = no }
							}
						}
					}
				}
				add_permanent_claim = root
			}
		} 
	}

	aus_ned2 = {
		icon = mission_indian_trade_company
		position = 10
		required_missions = { aus_ned } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					trade_company_region = trade_company_west_india
					if = {
						limit = {
							ROOT = {
								OR = {
									has_dlc = "Dharma"
									has_dlc = "Wealth of Nations"
								}
							}
						}
						is_owned_by_trade_company = no
					}
					else = {
						OR = {
							NOT = { is_core = root }
							unrest = 1
						}
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								trade_company_region = trade_company_west_india
								if = {
									limit = {
										ROOT = {
											OR = {
												has_dlc = "Dharma"
												has_dlc = "Wealth of Nations"
											}
										}
									}
									is_owned_by_trade_company = yes
								}
								else = {
									is_core = root
									NOT = { unrest = 1 }
								}
							}
						}
					}
				}
				AND = {
					trade_company_region = trade_company_coromandel
					if = {
						limit = {
							ROOT = {
								OR = {
									has_dlc = "Dharma"
									has_dlc = "Wealth of Nations"
								}
							}
						}
						is_owned_by_trade_company = no
					}
					else = {
						OR = {
							NOT = { is_core = root }
							unrest = 1
						}
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								trade_company_region = trade_company_coromandel
								if = {
									limit = {
										ROOT = {
											OR = {
												has_dlc = "Dharma"
												has_dlc = "Wealth of Nations"
											}
										}
									}
									is_owned_by_trade_company = yes
								}
								else = {
									is_core = root
									NOT = { unrest = 1 }
								}
							}
						}
					}
				}
				AND = {
					trade_company_region = trade_company_east_india
					if = {
						limit = {
							ROOT = {
								OR = {
									has_dlc = "Dharma"
									has_dlc = "Wealth of Nations"
								}
							}
						}
						is_owned_by_trade_company = no
					}
					else = {
						OR = {
							NOT = { is_core = root }
							unrest = 1
						}
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								trade_company_region = trade_company_east_india
								if = {
									limit = {
										ROOT = {
											OR = {
												has_dlc = "Dharma"
												has_dlc = "Wealth of Nations"
											}
										}
									}
									is_owned_by_trade_company = yes
								}
								else = {
									is_core = root
									NOT = { unrest = 1 }
								}
							}
						}
					}
				}
				AND = {
					trade_company_region = trade_company_indonesia
					if = {
						limit = {
							ROOT = {
								OR = {
									has_dlc = "Dharma"
									has_dlc = "Wealth of Nations"
								}
							}
						}
						is_owned_by_trade_company = no
					}
					else = {
						OR = {
							NOT = { is_core = root }
							unrest = 1
						}
					}
					ROOT = {
						NOT = {
							num_of_owned_provinces_with = {
								value = 5
								trade_company_region = trade_company_indonesia
								if = {
									limit = {
										ROOT = {
											OR = {
												has_dlc = "Dharma"
												has_dlc = "Wealth of Nations"
											}
										}
									}
									is_owned_by_trade_company = yes
								}
								else = {
									is_core = root
									NOT = { unrest = 1 }
								}
							}
						}
					}
				}
			}
			has_port = yes
		} 

		trigger = {  
			if = {
				limit = {
					OR = {
						has_dlc = "Dharma"
						has_dlc = "Wealth of Nations"
					}
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_west_india
					is_owned_by_trade_company = yes
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_coromandel
					is_owned_by_trade_company = yes
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_east_india
					is_owned_by_trade_company = yes
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_indonesia
					is_owned_by_trade_company = yes
				}
			}
			else = {
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_west_india
					is_core = root
					NOT = { unrest = 1 }
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_coromandel
					is_core = root
					NOT = { unrest = 1 }
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_east_india
					is_core = root
					NOT = { unrest = 1 }
				}
				num_of_owned_provinces_with = {
					value = 5
					trade_company_region = trade_company_indonesia
					is_core = root
					NOT = { unrest = 1 }
				}
			}
		} 

		effect = {  
			west_guangdong_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			guangdong_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			fujian_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			zhejiang_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			custom_tooltip = emp_hab_indian_trading_effect_tooltip
			hidden_effect = {
				every_province = {
					limit = {
						OR = {
							superregion = india_superregion
							superregion = east_indies_superregion
						}
						NOT = { owned_by = root }
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
						any_neighbor_province = {
							owned_by = root
						}
					}
					add_permanent_claim = root
				}
			}
		} 
	}

	bs_china_colonial = {
		icon = mission_trade_with_cathay
		position = 1
		required_missions = { aus_ned2 } 
		provinces_to_highlight = {  
			OR = {
				province_id = 667
				province_id = 684
			}
			NOT = { 667 = { is_strongest_trade_power = ROOT } }
			NOT = { 684 = { is_strongest_trade_power = ROOT } }
		} 

		trigger = {  
			OR = {
				667 = { is_strongest_trade_power = ROOT }
				684 = { is_strongest_trade_power = ROOT }
			}
		} 

		effect = {  
			south_china_region = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			australia_region = {
				limit = {
					is_city = yes
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
					NOT = {
						owner = {
							is_subject_of = root
						}
					}
				}
				add_permanent_claim = root
			}
			add_country_modifier = {
				name = hab_chinese_riches
				duration = 7300
			}
		} 
	}
}
hab_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	hab_italy_1 = {
		icon = mission_monarch_in_throne_room
		position = 2
		required_missions = { hab4_mission_1 } 
		provinces_to_highlight = {  
			OR = {
				area = slovakia_area
				area = transdanubia_area
				area = alfold_area
			}
			NOT = {
				ROOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 11 #out of 14
						OR = {
							area = slovakia_area
							area = transdanubia_area
							area = alfold_area
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 11 #out of 14
				OR = {
					area = slovakia_area
					area = transdanubia_area
					area = alfold_area
				}
			}
		} 

		effect = {  
			slavonia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			croatia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			east_adriatic_coast_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = "royal_hungary"
				duration = 5475
			}
		} 
	}

	hab_italy_2 = {
		icon = mission_galleys_in_port
		position = 3
		required_missions = { hab_italy_1 } 
		provinces_to_highlight = {  
			OR = {
				area = east_adriatic_coast_area
				area = croatia_area
				area = slavonia_area
			}
			NOT = {
				ROOT = {
					num_of_owned_provinces_with = {
						value = 7
						OR = {
							area = east_adriatic_coast_area
							area = croatia_area
							area = slavonia_area
						}
					}
				}
			}
			NOT = { owned_by = ROOT }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				OR = {
					area = east_adriatic_coast_area
					area = croatia_area
					area = slavonia_area
				}
			}
		} 

		effect = {  
			rascia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			serbia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			bosnia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		} 
	}

	hab_italy_3 = {
		icon = defeat_the_serbs
		position = 3
		required_missions = { hab_italy_2 } 
		provinces_to_highlight = {  
			OR = {
				AND = {
					province_id = 3002
					NOT = { owned_by = root }
				}
				AND = {
					OR = {
						area = serbia_area
						area = rascia_area
						area = bosnia_area
					}
					NOT = {
						ROOT = {
							num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
								value = 12 #out of 15
								OR = {
									area = serbia_area
									area = rascia_area
									area = bosnia_area
								}
							}
						}
					}
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
		} 

		trigger = {  
			3002 = { owned_by = root }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12 #out of 15
				OR = {
					area = serbia_area
					area = rascia_area
					area = bosnia_area
				}
			}
		} 

		effect = {  
			3002 = {
				change_province_name = "Sarajevo"
				rename_capital = "Sarajevo"
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			
			add_country_modifier = {
				name = hab_conquered_serbia
				duration = 7300
			}

			bulgaria_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			moldavia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			wallachia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
		} 
	}

	hab_italy_4 = {
		icon = push_on_to_bulgaria
		position = 4
		required_missions = { hab_italy_3 } 
		provinces_to_highlight = {  
			OR = {
				area = wallachia_area
				area = moldavia_area
				area = bulgaria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			wallachia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			moldavia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			bulgaria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		} 

		effect = {
			silistria_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}  
			thrace_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			macedonia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			albania_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			add_country_modifier = {
				name = hab_romania
				duration = -1
			}
			add_accepted_culture = bulgarian
			add_accepted_culture = romanian
		} 
	}

	hab_italy_5 = {
		icon = take_constantinople
		position = 5
		required_missions = { hab_italy_4 } 
		provinces_to_highlight = {  
			OR = {
				area = thrace_area
				area = silistria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			thrace_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			silistria_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			151 = {
				has_owner_religion = yes
			}
		} 

		effect = {  
			balkan_region = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			hudavendigar_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			151 = {
				change_culture = austrian
			}
			add_country_modifier = {
				name = hab_roman_legacy
				duration = -1
			}
		} 
	}

	league_war_3 = {
		icon = wallenstien_portrait
		position = 8
		required_missions = {
			league_war_1
			ostsiedlung_1
		}
		provinces_to_highlight = {  
			or = {
				area = moravia_area
				area = bohemia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			or = {
				and = {
					is_year = 1650
					custom_trigger_tooltip = {
						tooltip = league_war_over
						or = {
							hre_religion_treaty = yes
							hre_religion_locked = yes
						}
					}
					army_tradition = 70
				}
				and = {
					is_in_league_war = yes
					war_exhaustion = 2
					NOT = { war_score = 25 }
					moravia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					bohemia_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
			}
		} 

		effect = {
			custom_tooltip = hab_thirty_years_wallen
			hidden_effect = {
				if = {
					limit = { 
						or = {
							hre_religion_treaty = yes
							hre_religion_locked = yes
						}
					}
					add_country_modifier = {
						name = wallenstien_reh
						duration = -1
					}
				}
				else = {
					hidden_effect = {
						release = MVA
			265 = {
				cede_province = root
				add_core = root
			}
			4726 = {
				cede_province = root
				add_core = root
			}
			4724 = {
				cede_province = MVA
				add_core = MVA
			}
			2970 = {
				cede_province = MVA
				add_core = MVA
			}
			define_general = {
				name = "Albrecht von Wallenstein"
				shock = 6
				fire = 5
				manuever = 4
				siege = 1
			}
			266 = {
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				infantry = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				cavalry  = root
				artillery  = root
				artillery  = root
				artillery  = root
				artillery  = root
				artillery  = root
				artillery  = root
			}
			create_subject = {
				subject_type = habsburg_crownland
				who = MVA
			}
			MVA = {
				change_government = monarchy
				define_ruler = {
					name = "Albrecht Wenzel Eusebius"
					dynasty = "von Wallenstein"
					adm = 5
					dip = 3
					mil = 5
					age = 30
					claim = 70
				}
				override_country_name = wln
			}
			set_country_flag = hab_wallenstien
			country_event = { 
				id = beaus_missions.4
				days = 182
				random = 365
			}
					}
				}
			}
		} 
	}

	aus_ned = {
		icon = mission_the_austrian_succession
		position = 9
		provinces_to_highlight = {  
			region = low_countries_region
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 12 #out of 21 (but at least 7 are not ruled by Burgundy at start)
						region = low_countries_region
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12 #out of 21 (but at least 7 are not ruled by Burgundy at start)
				region = low_countries_region
			}
		} 

		effect = {  
			add_country_modifier = {
				name = hab_austrian_netherlands
				duration = 7300
			}
		} 
	}

	aus_ned3 = {
		icon = the_ostend_company
		position = 10
		required_missions = { aus_ned } 
		provinces_to_highlight = {  

		} 

		trigger = {  
			if = {
				limit = {
					OR = {
						has_dlc = "Dharma"
						has_dlc = "Wealth of Nations"
					}
				}
				any_owned_province = {
					is_owned_by_trade_company = yes
					continent = asia
				}
			}
			else = {
				num_of_owned_provinces_with = {
					value = 10
					is_overseas = yes
					NOT = { continent = north_america }
					NOT = { continent = south_america }
				}
			}
		} 

		effect = {  
			if = {
				limit = { #you can get it via flavor_hab.18 (and remove it via flavor_hab.19) as well
					NOT = { has_country_flag = hab_no_ostende_company }
					NOT = { has_country_modifier = hab_ostende_company }
				}
				add_country_modifier = { #
					name = hab_ostende_company
					duration = -1
				}
			}

			custom_tooltip = emp_hab_ostend_company_effect_tooltip
			hidden_effect = {
				india_superregion = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_port = yes
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				east_indies_superregion = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_port = yes
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		} 
	}

	bs_colonial_australia = {
		icon = settle_austrialasia
		position = 1
		required_missions = { aus_ned3 } 
		provinces_to_highlight = {  
			region = australia_region
			ROOT = {
				NOT = {
					any_subject_country = {
						is_colonial_nation = yes
						capital_scope = {
							colonial_region = colonial_australia
						}
						any_owned_province = {
							region = australia_region
						}
					}
				}
			}
		} 

		trigger = {  
			any_subject_country = {
				is_colonial_nation = yes
				capital_scope = {
					colonial_region = colonial_australia
				}
				any_owned_province = {
					region = australia_region
				}
			}
		} 

		effect = {  
			add_prestige = 20
			add_country_modifier = {
				name = hab_austrian_australia
				duration = 10950
			}
		} 
	}
}
hab_6 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	hab4_mission_1 = {
		icon = balance_the_estates
		position = 1
		provinces_to_highlight = {  

		} 

		trigger = {  
			crown_land_share = 30
			if = {
				limit = {
					has_estate = estate_nobles
				}
				estate_loyalty = {
					estate = estate_nobles
					loyalty = 50
				}
			}
			if = {
				limit = {
					has_estate = estate_burghers
				}
				estate_loyalty = {
					estate = estate_burghers
					loyalty = 50
				}
			}
			if = {
				limit = {
					has_estate = estate_church
				}
				estate_loyalty = {
					estate = estate_church
					loyalty = 50
				}
			}
			or = {
				if = {
					limit = { has_estate = estate_burghers }
					num_of_estate_agendas_completed = {
						estate = estate_burghers
						value = 1
					}
				}
				if = {
					limit = { has_estate = estate_burghers }
					num_of_estate_agendas_completed = {
						estate = estate_church
						value = 1
					}
				}
				if = {
					limit = { has_estate = estate_burghers }
					num_of_estate_agendas_completed = {
						estate = estate_nobles
						value = 1
					}
				}
			}
		} 

		effect = {  
			add_stability_or_adm_power = yes
			change_estate_land_share = {
				estate = all
				share = -2.5
			}
			country_event_with_option_insight = { 
				id = beaus_missions.1
				
				option_1 = "
					custom_tooltip = hab_san_stefan1
				"
				option_2 = "
					custom_tooltip = hab_san_stefan2
				"
			}
		} 
	}

	hab4_mission_2 = {
		icon = develop_our_capital
		position = 1
		required_missions = { hab4_mission_1 } 
		provinces_to_highlight = {  
			area = austria_proper_area
			Not = { development = 12 }
		} 

		trigger = {  
			austria_proper_area = {
				type = all
				development = 12
				is_prosperous = yes
			}
			
		} 

		effect = {  
			change_estate_land_share = {
				estate = all
				share = -2.5
			}
			add_country_modifier = {
				name = hab_prosperity_windfall
				duration = 7300
			}
		} 
	}

	hab4_mission_3 = {
		icon = austria_prospers
		position = 1
		required_missions = { hab4_mission_2 } 
		provinces_to_highlight = {  
			or = {
				area = inner_austria_area
				area = carinthia_area
			}
			Not = { development = 12 }
			owned_by = root
		} 

		trigger = {  
			inner_austria_area = {
				type = all
				development = 12
				is_prosperous = yes
			}
			carinthia_area = {
				type = all
				development = 12
				is_prosperous = yes
				
			}
			custom_trigger_tooltip = {
				tooltip = crush_styria
				has_country_flag = styria_crushed
			} 
		} 

		effect = {  
			add_country_modifier = {
				name = austria_development
				duration = 3650
			}
			add_mercantilism = 5
			add_stability_or_adm_power = yes
		} 
	}

	hab4_mission_4 = {
		icon = adriatic_access
		position = 4
		required_missions = {
			hab4_mission_3
			hab5_mission_2
			hab_italy_2
		}
		provinces_to_highlight = {  
			or = {
				area = venetia_area
				area = carinthia_area
				area = croatia_area
			}
			or = {
				Not = { has_building = dock }
				Not = { has_building = drydock }
			}
			or = {
				Not = { has_building = shipyard }
				Not = { has_building = grand_shipyard }
			}
			has_port = yes
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_subjects_with = {
				or = {
					area = venetia_area
					area = carinthia_area
					area = croatia_area
				}
				or = {
				 	has_building = dock 
					has_building = drydock 
				}
				or = {
					has_building = shipyard 
					has_building = grand_shipyard 
				}
				value = 5
			} 
			if = { 
				limit = { has_dlc = "Golden Century" }
				has_flagship = yes 
			}
			else = { navy_tradition = 20 }
			num_of_galley = 20
			num_of_light_ship = 10
		} 

		effect = {  
			for = {
				custom_tooltip = hab_adriatic
				effect = "random_owned_province = { 
					limit = { 
						NOT = { has_province_flag = hab_adriatic } 
						 or = {
				 			has_building = dock 
							has_building = drydock 
						}
						or = {
							has_building = shipyard 
							has_building = grand_shipyard 
						}
					}
					set_province_flag = hab_adriatic
				}"
				amount = 5
			}
			tooltip = {
				add_province_modifier = {
					name = adriatic_ports
					duration = -1
				}
			}
			130 = {
				add_province_modifier = {
					name = adriatic_gates
					duration = -1
				}
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						has_province_flag = hab_adriatic
					}
					clr_province_flag = hab_adriatic
					add_province_modifier = { 
						name = adriatic_ports 
						duration = -1 
					}
				}
			}
		} 
	}

	hab4_mission_5 = {
		icon = capture_adriatic_ports
		position = 5
		required_missions = { hab4_mission_4 } 
		provinces_to_highlight = {
			AND = {
					continent = europe
					owned_by = root
					development = 20
					NOT = { development = 30 }
					or = {
						NOT = {  has_building = courthouse }
						NOT = { has_building = town_hall }
					}	
				}  
		} 

		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				development = 30
				or = {
					has_building = courthouse
					has_building = town_hall
				}	
			}  
		} 

		effect = {  
			add_country_modifier = {
				name = hab_flourishing_in_empire
				duration = 7300
			}
			change_government_reform_progress = 100
		} 
	}

	hab4_mission_6 = {
		icon = the_viennese_waltz
		position = 1
		required_missions = { hab4_mission_5 } 
		provinces_to_highlight = {  
		} 

		trigger = {  
			134 = {
				owned_by = root
				development = 45
				num_of_buildings_in_province = 6
			}
			has_adm_advisor_3 = yes
			has_dip_advisor_3 = yes
			has_mil_advisor_3 = yes
			is_in_deficit = no
		} 

		effect = {  
			134 = {
				add_province_modifier = {
					name = hab_viennese_ballrooms
					duration = -1
				}
			}
			add_power_projection = {
				type = 25_permanent_power_projection
				amount = 25
			}
			add_dip_power = 150
		} 
	}
}
hab_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	hab5_mission_1 = {
		icon = mission_italian_condottiere
		position = 2
		required_missions = { hab4_mission_1 } 
		provinces_to_highlight = {  
			or = {
				province_id = 111
				province_id = 110
			}
			not = { owned_by = root }
		} 

		trigger = {  
			owns = 110
			owns = 111
		} 

		effect = { 
			venetia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}

		} 
	}

	hab5_mission_2 = {
		icon = byz_aegean_islands
		position = 1
		required_missions = { hab5_mission_1 } 
		provinces_to_highlight = {
			area = venetia_area
			not = { owned_by = root }  
		} 

		trigger = {  
			venetia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			
		} 

		effect = {
			venetia_area = {
				add_province_modifier = {
					name = "protected_italian_interests"
					duration = 3650
				}
			} 
			po_valley_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lombardy_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			if = {
				limit = {
					exists = MLO
					valid_for_personal_unions_trigger = yes
					MLO = {
						valid_for_personal_unions_trigger = yes
						num_of_cities = 3 #no point in taking an OPM
						owns = 104
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = MLO
				}
			}
		}  
	}

	hab5_mission_3 = {
		icon = kingdom_of_lombardy
		position = 1
		required_missions = { hab5_mission_2 } 
		provinces_to_highlight = {
			or = {
				area = po_valley_area
				area = lombardy_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			po_valley_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			lombardy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		} 

		effect = {  
			emilia_romagna_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			tuscany_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
		} 
	}

	hab5_mission_4 = {
		icon = mission_italian_conquest
		position = 1
		required_missions = { hab5_mission_3 } 
		provinces_to_highlight = { 
			or = {
				area = emilia_romagna_area
				area = tuscany_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = { 
			num_of_owned_provinces_with = {
				value = 7
				or = {
					area = emilia_romagna_area
					area = tuscany_area
				}
			}
		} 

		effect = {  
			naples_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			apulia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			calabria_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
		} 
	}

	hab5_mission_5 = {
		icon = king_of_naples
		position = 1
		required_missions = { hab5_mission_4 } 
		provinces_to_highlight = {  
			or = {
				area = calabria_area
				area = apulia_area
				area = naples_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {
			num_of_owned_provinces_with = {
				value = 8
				or = {
					area = calabria_area
					area = apulia_area
					area = naples_area
				}
			}
		} 

		effect = {  
			italy_region = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			add_prestige = 50
			add_mercantilism = 5
		} 
	}

	hab5_mission_6 = {
		icon = mission_rule_italy
		position = 7
		required_missions = { hab5_mission_5 } 
		provinces_to_highlight = {  
			owner = {
				NOT = { tag = root }
				NOT = { is_subject_of = ROOT }
				AND = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 7
						continent = europe
					}
					capital_scope = {
						region = italy_region
					}
				}
			}
		} 

		trigger = {  
			custom_trigger_tooltip = {
				tooltip = emp_hab_no_one_to_italy_trigger_tooltip
				NOT = {
					any_country = {
						NOT = { tag = root }
						NOT = { is_subject_of = ROOT }
						capital_scope = {
							region = italy_region
						}
						num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
							value = 7
							region = italy_region
						}
					}
				}
			}
		} 

		effect = {  
			add_country_modifier = {
				name = hab_geographic
				duration = -1
			}
			add_mercantilism = 10
			add_prestige = 50
			add_adm_power = 100
			add_mil_power = 100
			add_dip_power = 100
		} 
	}
}
bavaria = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	south_germany_1 = {
		icon = take_the_bishoprics
		position = 6
		provinces_to_highlight = {  
			OR = {
				province_id = 110
				province_id = 76
				province_id = 4709
				province_id = 1868
			}
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 2
						OR = {
							province_id = 110
							province_id = 76
							province_id = 4709
							province_id = 1868
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 2
				OR = {
					province_id = 110
					province_id = 76
					province_id = 4709
					province_id = 1868
				}
			}
		} 

		effect = {  
			if = {
				limit = {
					exists = BAV
					valid_for_personal_unions_trigger = yes
					BAV = {
						valid_for_personal_unions_trigger = yes
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = BAV
				}
			}
			else = {
				upper_bavaria_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				lower_bavaria_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
				east_bavaria_area = {
					limit = {
						NOT = { is_core = root }
						NOT = { is_permanent_claim = root }
					}
					add_permanent_claim = root
				}
			}
		} 
	}

	south_germany_2 = {
		icon = duchy_of_bavaria
		position = 7
		required_missions = { south_germany_1 } 
		provinces_to_highlight = {  
			OR = {
				area = east_bavaria_area
				area = upper_bavaria_area
				area = lower_bavaria_area
			}
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 8 #out of 12
						OR = {
							area = east_bavaria_area
							area = upper_bavaria_area
							area = lower_bavaria_area
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8 #out of 12
				OR = {
					area = east_bavaria_area
					area = upper_bavaria_area
					area = lower_bavaria_area
				}
			}
		} 

		effect = {  
			add_country_modifier = {
				name = hab_pure_bavarian_beer
				duration = 7300
			}
		} 
	}

	south_germany_3 = {
		icon = connect_further_austria
		position = 8
		required_missions = { south_germany_2 } 
		provinces_to_highlight = {  
			province_id = 1880
			OR = {
				NOT = { owned_by = root }
				is_in_capital_area = no
			}
		} 

		trigger = {  
			1880 = {
				owned_by = root
				is_in_capital_area = yes
			}
		} 

		effect = {  
			switzerland_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			romandie_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			upper_swabia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			lower_swabia_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
			upper_rhineland_area = {
				limit = {
					NOT = { is_core = root }
					NOT = { is_permanent_claim = root }
				}
				add_permanent_claim = root
			}
		} 
	}

	south_germany_4 = {
		icon = control_swabia
		position = 9
		required_missions = { south_germany_3 } 
		provinces_to_highlight = {  
			OR = {
				area = upper_swabia_area
				area = lower_swabia_area
				area = upper_rhineland_area
			}
			ROOT = {
				NOT = {
					num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
						value = 8 #of 10 (you can spare the FCs)
						OR = {
							area = upper_swabia_area
							area = lower_swabia_area
							area = upper_rhineland_area
						}
					}
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
		} 

		trigger = {  
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8 #of 10 (you can spare the FCs)
				OR = {
					area = upper_swabia_area
					area = lower_swabia_area
					area = upper_rhineland_area
				}
			}
		} 

		effect = {  
			upper_swabia_area = {
				limit = { country_or_non_sovereign_subject_holds = root }
				add_nationalism = -5
				add_province_modifier = {
					name = hab_holdings_in_swabia
					duration = 10950
				}
			}
			lower_swabia_area = {
				limit = { country_or_non_sovereign_subject_holds = root }
				add_nationalism = -5
				add_province_modifier = {
					name = hab_holdings_in_swabia
					duration = 10950
				}
			}
			upper_rhineland_area = {
				limit = { country_or_non_sovereign_subject_holds = root }
				add_nationalism = -5
				add_province_modifier = {
					name = hab_holdings_in_swabia
					duration = 10950
				}
			}
		} 
	}

	south_germany_6 = {
		icon = conquer_burgundy
		position = 10
		required_missions = {
			south_germany_4
			south_germany_5
		}
		provinces_to_highlight = {  
			OR = {
				area = bourgogne_area
				area = lorraine_area
			}
			NOT = { country_or_non_sovereign_subject_holds = root }
		} 

		trigger = {  
			bourgogne_area = {
				type = all
				country_or_non_sovereign_subject_holds = root
			}
			lorraine_area = {
				type = all
				country_or_non_sovereign_subject_holds = root
			}
		} 

		effect = {  
			add_country_modifier = {
				name = hab_empire_in_the_west
				duration = 7300
			}
			bourgogne_area = {
				add_province_modifier = {
					name = hab_back_into_empire
					duration = 7300
				}
			}
			lorraine_area = {
				add_province_modifier = {
					name = hab_back_into_empire
					duration = 7300
				}
			}
			every_country = {
				limit = {
					capital_scope = {
						region = france_region
					}
					is_part_of_hre = yes
				}
				add_opinion = {
					who = root
					modifier = opinion_hab_back_into_empire
				}
			}
		} 
	}
}
habsburg = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	ostsiedlung_1 = {
		icon = lead_the_empire
		position = 7
		provinces_to_highlight = {  

		} 

		trigger = { 
			if = {
				limit = {
					government = monarchy
					has_government_attribute = heir
				}
				calc_true_if = {
					desc = emp_hab_spread_dynasties_trigger_tooltip2
					amount = 2
					all_country = {
						OR = {
							junior_union_with = root
							dynasty = root
						}
						has_opinion = {
							who = root
							value = 120
						}
					}
				}
			}
			else = {
				calc_true_if = {
					amount = 3
					all_country = {
						OR = {
							is_subject_of = root
							alliance_with = root
						}
						has_opinion = {
							who = root
							value = 120
						}
						custom_trigger_tooltip = {
							tooltip = same_government_as_root
							same_govt_as_root_trigger = yes
						}
					}
				}
			}
		} 

		effect = {  
			custom_tooltip = hab_special_vassal
			set_country_flag = allow_hab_special
			if = {
				limit = {
					government = monarchy
					has_government_attribute = heir
				}
				add_country_modifier = {
					name = hab_many_thrones
					duration = 7300
				}
			}
			else = {
				add_country_modifier = {
					name = hab_lots_of_influence
					duration = 7300
				}
			}
		} 
	}

	ostsiedlung_2 = {
		icon = glory_to_von_habsburg
		position = 8
		required_missions = { ostsiedlung_1 } 
		provinces_to_highlight = {  
			owner = {
				is_subject_of = ROOT
				OR = {
					is_subject_of_type = habsburg_crownland
					is_subject_of_type = habsburg_crown
				}
				liberty_desire = 5
			}
		} 

		trigger = {  
			calc_true_if = {
				all_subject_country = {
					OR = {
						is_subject_of_type = habsburg_crownland
						is_subject_of_type = habsburg_crown
					}
					NOT = { liberty_desire = 5 }
				}
				amount = 2
			}
			crown_land_share = 50	
		} 

		effect = {  
			country_event_with_option_insight = { 
				id = beaus_missions.11
				
				option_1 = "
					custom_tooltip = hab_crownland_upgrade1
				"
				option_2 = "
					custom_tooltip = hab_crownland_upgrade2
				"
				option_3 = "
					custom_tooltip = hab_crownland_upgrade3
				"
			}
		} 
	}

	ostsiedlung_3 = {
		icon = spread_the_von_wettins
		position = 9
		required_missions = { ostsiedlung_2 } 
		provinces_to_highlight = {  
			owner = {
				is_subject_of = ROOT
				OR = {
					is_subject_of_type = habsburg_crownland
					is_subject_of_type = habsburg_crown
				}
				liberty_desire = 5
			}
		} 

		trigger = {  
			if = {
				limit = {
					government = monarchy
					has_government_attribute = heir
				}
				calc_true_if = {
					desc = emp_hab_spread_dynasties_trigger_tooltip3
					amount = 7
					all_country = {
						OR = {
							junior_union_with = root
							dynasty = root
						}
						has_opinion = {
							who = root
							value = 150
						}
						trust = {
							who = root
							value = 70
						}
					}
				}
			}
			else = {
				calc_true_if = {
					amount = 4
					all_country = {
						OR = {
							is_subject_of = root
							alliance_with = root
						}
						has_opinion = {
							who = root
							value = 150
						}
						custom_trigger_tooltip = {
							tooltip = same_government_as_root
							same_govt_as_root_trigger = yes
						}
						trust = {
							who = root
							value = 75
						}
					}
				}
			}
		} 

		effect = {  
			change_dip = 2
			change_heir_dip = 2
			change_adm = 2
			change_heir_adm = 2
			add_power_projection = {
				type = mission_rewards_power_projection
				amount = 50
			}
			add_country_modifier = {
				name = hab_supreme_in_europe
				duration = -1
			}
			if = { 
				limit = { has_dlc = "Mandate of Heaven" }
				custom_tooltip = pol_if_used_ge_rest_else_30_years_extension_tt 
				if = {
					limit = { has_had_golden_age = yes } 
					reset_golden_age = yes 
				}
				else_if = {
					limit = { in_golden_age = yes } 
					extend_golden_age = 600
				}
			}
		} 
	}
	ostsiedlung_8 = {
		icon = bohemian_crystal
		position = 10
		provinces_to_highlight = {  
			province_id = 1771
			OR = {
				NOT = { owned_by = ROOT }
				NOT = { development = 20 }
				has_production_building_trigger = no
			}
		} 

		trigger = {  
			1771 = {
				owned_by = ROOT
				development = 20
				has_production_building_trigger = yes
			}
		} 

		effect = {  
			set_country_flag = bohemian_crystal_flag
			if = {
				limit = {
					NOT = {
						has_global_flag = bohemian_glass_flag
					}
				}
				country_event = { id = prices.43 }
			}
			add_prestige = 20
		} 
	}
	ostsiedlung_9 = {
		icon = mission_have_manufactories
		required_missions = { ostsiedlung_8 } 
		position = 11
		provinces_to_highlight = {  
			or = {
				area = bohemia_area
				area = moravia_area
				area = erzgebirge_area
			}
			Not = {
				And = {
					development = 15
					or = {
						has_building = counting_house
						has_building = workshop
					}
					has_manufactory_trigger = yes
				}
			}
		} 

		trigger = {
			bohemia_area = {
				type = all
				development = 15
				or = {
					has_building = counting_house
					has_building = workshop
				}
				has_manufactory_trigger = yes
			}  
			moravia_area = {
				type = all
				development = 15
				or = {
					has_building = counting_house
					has_building = workshop
				}
				has_manufactory_trigger = yes
			}
			erzgebirge_area = {
				type = all
				development = 15
				or = {
					and = {
						or = {
							has_building = counting_house
							has_building = workshop
						}
						has_manufactory_trigger = yes
					}
					trade_goods = gold
				}
			}
		} 

		effect = {  
			add_years_of_owned_provinces_production_income = {
				trigger = {
					or = {
						area = bohemia_area
						area = moravia_area
						area = erzgebirge_area
					}
				}
				years = 2
			}
			custom_tooltip = hab_bohemian_industry
			hidden_effect = {
				every_owned_province = {
					limit = {
						or = {
							area = bohemia_area
							area = moravia_area
							area = erzgebirge_area
						}
					}
					add_base_manpower = 1
					add_base_tax = 1
					add_base_production = 1
				}
			}
			
		} 
	}
}
new_branch_hab = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = HAB } 

	ostsiedlung_4 = {
		icon = mission_industria_sedera
		position = 8
		required_missions = { ostsiedlung_1 } 
		provinces_to_highlight = {  
			or = {
				area = transdanubia_area
				area = alfold_area
				area = slavonia_area
				area = serbia_area
			}
		} 

		trigger = {  
			development_in_provinces = {
				or = {
					area = transdanubia_area
					area = alfold_area
					area = slavonia_area
					area = serbia_area
				}
				value = 150
			}
			num_of_owned_provinces_with = {
				or = {
					area = transdanubia_area
					area = alfold_area
					area = slavonia_area
					area = serbia_area
				}
				development = 15
				value = 5
			}
		} 

		effect = {  
			set_country_flag = hab_enable_infrastructure_network_flag
			custom_tooltip = austrian_state_edict_unlock
			custom_tooltip = hab_develop_urban_centers
			tooltip = {
				add_province_modifier = { 
					name = fra_developing_urban_center_modifier
					duration = 5475
				}
			}
			hidden_effect = {
				every_province = {
					limit = { 
						development = 15 
						country_or_non_sovereign_subject_holds = ROOT 
						or = {
							area = transdanubia_area
							area = alfold_area
							area = slavonia_area
							area = serbia_area
						} 
					}
					add_province_modifier = { 
						name = fra_developing_urban_center_modifier
						duration = 5475
					}
				}
			}
		} 
	}

	ostsiedlung_5 = {
		icon = multicultural_empire
		position = 9
		required_missions = { ostsiedlung_4 } 
		provinces_to_highlight = {  

		} 

		trigger = {  
			mil_power = 150
			army_professionalism = 0.50
			monthly_mil = 12
			num_of_owned_provinces_with = {
				has_manpower_building_trigger = yes 
				value = 20
			}
		} 

		effect = {  
			country_event_with_option_insight = { 
				id = beaus_missions.12
				
				option_1 = "
					custom_tooltip = hab_austrian
				"
				option_2 = "
					custom_tooltip = hab_hungarian
				"
				option_3 = "
					custom_tooltip = hab_bohemian
				"
				option_4 = "
					custom_tooltip = hab_croat
				"
			}
		} 
	}

	ostsiedlung_6 = {
		icon = mission_dalaskogen
		position = 10
		provinces_to_highlight = {  
			province_id = 73
		}

		trigger = {  
			owns = 73
			73 = {
				development = 20
			}
			NOT = { inflation = 2 }
		} 

		effect = {  
			if = {
				limit = { 
					73 = {
						has_province_modifier = hab_schwaz_mine
					}
			 	}
				73 = {
					add_base_tax = 2
					add_base_production = 3
					add_base_manpower = 2
				}
			}
			else = {
				set_country_flag = hab_fire_event
				country_event = {
					id = flavor_hab.11
				}
				clr_country_flag = hab_fire_event
			}
			add_inflation = -2
			add_country_modifier = {
				name = hab_silver_mine
				duration = 7300
			}
		} 
	}
	ostsiedlung_7 = {
		icon = mission_african_gold
		position = 11
		required_missions = { ostsiedlung_6 } 
		provinces_to_highlight = {  
			trade_goods = gold
			continent = europe
		} 

		trigger = {  
			num_of_owned_provinces_with = {
				trade_goods = gold
				development = 25
				value = 2
			}
			monthly_income  = 150
		} 

		effect = {  
			add_inflation = -2
			every_province = {
				limit = {
					trade_goods = gold
					development = 25
				}
				add_province_modifier = {
					name = hab_ducat_province
					duration = -1
				}
			}
			add_country_modifier = {
				name = hab_ducats
				duration = -1
			}
		} 
	}
}
